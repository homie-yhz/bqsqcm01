<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="../PUBLIC/css/box.css">
  <link rel="stylesheet" href="css/statistics.css">
  <script src="../PUBLIC/js/jquery-1.8.3.min.js"></script>
  <title>登录页</title>
  <style>
    html,body{height:100%;}
    /*    input::-webkit-outer-spin-button
        !*input::-webkit-inner-spin-button*!{
          -webkit-appearance: none !important;
          margin: 0;
        }*/
  </style>
</head>
<body>
<div class="header v-fm fz-18" style="position:static;">
  <a href="" class="header-box v-fm c-00">
    返回<i class="icon-left"></i>
  </a>
  <span class="c-2 fz-15" style="margin-left:15px;">登录密码修改</span>
</div>
<div class="user-info">
  <div class="user-ID v-f-b v-fm">
    <p class="fz-22">账号：jinliang@okjia.com.cn / 13910830458</p>
    <p class=" c-27 fz-20">需要更换请联系我们:65098888</p>
  </div>
  <div class="user-detail">
    <div class="v-fm">
      <p>使用者：</p><p>金亮</p>
    </div>
    <div class="v-fm">
      <p>所属部门：</p><p>产品中心</p>
    </div>
    <div class="v-fm">
      <p>职位：</p><p>产品经理</p>
    </div>
    <div class="v-fm">
      <p>公司邮箱：</p><p>jinlinag@okjia.com.cn</p>
    </div>
    <div class="v-fm">
      <p>绑定手机：</p><p>1388888888</p>
    </div>
    <div class="v-fm">
      <p>密码：</p><a class="o-resetpwd btn-send tac" style="margin-left:4px;">修改密码</a>
    </div>
  </div>
</div>
<!--<div class="login-bg">
  <div class="login">
    <div class="fz-16">
      <span>账号</span>
      <input type="text" class="user-name" placeholder="公司邮箱/手机号" >
    </div>
    <div class="">
      <span>密码</span>
      <input type="password" class="user-password" placeholder="公司邮箱/手机号">
    </div>
    <div class="">
      <span>安全验证</span>
      <div class="v-fcm slide-unlock">
        向右拖拽，完成登录验证。
        <div class="slider"></div>
      </div>
    </div>
    <div class="v-fm">
      <div class="radiobox v-fm">
        <div class="v-fcm o-radiobox">
          <div class="radiobox-on"></div>
        </div>
        记住密码
      </div>
      <a href="" style="color:#40C6FF;">忘记密码</a>
    </div>
    <div class="btn-box">
      <p class="left login-info" style="display:none;">
        请输入
      </p>
      <div class="right">
        <a href="" class="btn-login tac">登录</a>
      </div>
    </div>
  </div>
</div>-->

<!--弹框：重置密码-->
<!--<div class="mask v-fcm">
  <div class="mask-resetpassword">
    <div class="v-f-b" style="border-bottom:1px solid #ebebeb;">
      <div class="reset-title">密码初始化</div><div class="reset-title-info v-fm"></div>
    </div>
    <div class="v-fm form" style="margin-top:16px;">
      <div>绑定手机：</div>
      <input type="text" class="user-phone" maxlength="11">
      <a class="o-send-code btn-send v-fcm">发送验证码</a>
    </div>
    <div class="v-fm form">
      <div>验证码：</div>
      <input type="text" class="user-code" maxlength="6">
      <a class="reset-info"></a>
    </div>
    <div class="v-fcm" style="height:80px;">
      <a class="btn-send v-fcm o-intpassword">初始化密码</a>
    </div>
  </div>
</div>-->

<!--弹框：设置新密码-->
<div class="new-pwd" style="display: none;">
  <div class="mask v-fcm">
    <div class="mask-resetpassword mask-setnewpwd">
      <div class="v-f-b" style="border-bottom:1px solid #ebebeb;">
        <div class="reset-title">修改密码</div><div class="set-newpwd v-fm "></div>
      </div>
      <div class="v-fm form" style="margin-top:16px;">
        <div>旧密码：</div>
        <input type="password" class="user-pwd" maxlength="12">
        <i class=""></i>
      </div>
      <div class="v-fm form">
        <div>新密码：</div>
        <input type="password" class="user-pwd" maxlength="12">
        <i class=""></i>
      </div>
      <div class="v-fm form">
        <div>确认密码：</div>
        <input type="password" class="user-repwd" maxlength="12">
        <i class=""></i>
      </div>
      <div class="v-fcm" style="height:80px;">
        <a class="btn-send v-fcm o-setnewpwd">确认</a>
        <a class="btn-send bg-9 v-fcm o-cancel">取消</a>
      </div>
    </div>
  </div>
</div>


</body>
<script>
  $(function(){
    var reg_pwd = /^[a-zA-Z0-9]{8,12}$/;
    /*事件：点击修改密码  出现弹框*/
    $('.o-resetpwd').click(function(){
      $('.new-pwd').show();
      $('.mask-setnewpwd input').val('');
    });
    /*事件：点击取消按钮  隐藏弹框*/
    $('.o-cancel').click(function(){
      $('.new-pwd').hide();
    });
    /*事件：监听  密码表单的输入  */
    var $inputs = $('.mask-setnewpwd input');
    var $input0 = $inputs.eq(0);
    var $input1 = $inputs.eq(1);
    var $input2 = $inputs.eq(2);

    $($inputs).bind('input propertychange', function() {
      if(reg_pwd.test($(this).val())){
        $(this).next().addClass('icon-correct');
      }else{
        $(this).next().removeClass('icon-correct');
      }
    });

    /*
     * 事件：点击弹框的确定按钮  验证
     * 1.不能为空
     * 2.三个密码是否格式正确（是否含有对号  也就是  icon-correct class）
     * 3.ajax 验证 旧密码是否正确
     * 4.两次输入的新密码是否一致
     */
    $('.o-setnewpwd').click(function(){
      //1.验证不能为空
      $inputs.each(function(i){
        if($inputs.eq(2).val()==''){
          info('密码不能为空',1500);
          return false;
        }else if($input1.val()!=$input2.val()){
          info('两次密码输入不一致',1500);
          return false;
        }else{
          $.ajax({
            url:'',
            type:'POST',
            data:'',
            dataType:'json',
            success:function(){

            },
            error:function(){
              info('旧密码输入不正确，请重新输入',1500);
            }
          });
        }
      });
    })
  });
  /*方法：提示信息*/
  function info(inf,time){
    $('.set-newpwd').html(inf);
    setTimeout("$('.set-newpwd').html('')", time);
  }
</script>
</html>